# MetaMask å’Œé’±åŒ…é™åˆ¶

æœ¬æ–‡æ¡£è®°å½• MetaMask å’Œå…¶ä»–é’±åŒ…çš„å·²çŸ¥é™åˆ¶å’Œè¡Œä¸ºã€‚

## ğŸš« é™åˆ¶åˆ—è¡¨

### 1. **æ— æ³•ç¼–ç¨‹æ–­å¼€è¿æ¥**

**é—®é¢˜**ï¼šç½‘ç«™æ— æ³•é€šè¿‡ä»£ç è¯·æ±‚æ–­å¼€ MetaMask çš„è¿æ¥æƒé™ã€‚

**å½±å“**ï¼š
- SDK çš„ `disconnect()` æ–¹æ³•åªèƒ½æ¸…ç†å†…éƒ¨çŠ¶æ€
- ç”¨æˆ·ä»ç„¶åœ¨ MetaMask çš„ "Connected Sites" åˆ—è¡¨ä¸­çœ‹åˆ°è¯¥ç½‘ç«™
- ä¸‹æ¬¡ç”¨æˆ·è®¿é—®ç½‘ç«™æ—¶ï¼ŒMetaMask ä»ç„¶ä¼šè‡ªåŠ¨è¿æ¥

**è§£å†³æ–¹æ¡ˆ**ï¼š
- ç”¨æˆ·å¿…é¡»æ‰‹åŠ¨åœ¨ MetaMask ä¸­æ–­å¼€ï¼š
  1. æ‰“å¼€ MetaMask
  2. ç‚¹å‡»å³ä¸Šè§’ä¸‰ä¸ªç‚¹ â†’ "Connected sites"
  3. æ‰¾åˆ°ç½‘ç«™å¹¶ç‚¹å‡» "Disconnect"

**æ›¿ä»£æ–¹æ¡ˆ**ï¼š
- SDK æ¸…ç†å†…éƒ¨çŠ¶æ€åï¼Œä¸å†å‘èµ·ä»»ä½•é’±åŒ…è¯·æ±‚
- æç¤ºç”¨æˆ·æ‰‹åŠ¨æ–­å¼€è¿æ¥

---

### 2. **æ— æ³•æ£€æµ‹åˆ‡æ¢åˆ°æœªè¿æ¥è´¦æˆ·**

**é—®é¢˜**ï¼šå½“ç”¨æˆ·åœ¨ MetaMask ä¸­åˆ‡æ¢åˆ°æœªè¿æ¥çš„è´¦æˆ·æ—¶ï¼Œä¸ä¼šè§¦å‘ä»»ä½•äº‹ä»¶ã€‚

**åŸå› **ï¼š`eth_accounts` å’Œ `accountsChanged` åªè¿”å›**å·²æˆæƒ**çš„è´¦æˆ·åˆ—è¡¨ã€‚

**å½±å“**ï¼š
- SDK æ— æ³•è‡ªåŠ¨æ£€æµ‹ç”¨æˆ·åˆ‡æ¢åˆ°æ–°è´¦æˆ·
- ç½‘ç«™ä»ç„¶æ˜¾ç¤ºæ—§è´¦æˆ·

**è§£å†³æ–¹æ¡ˆ**ï¼š
- å»ºè®®ç”¨æˆ·å…ˆæ‰‹åŠ¨æ–­å¼€è¿æ¥
- åˆ‡æ¢åˆ°æ–°è´¦æˆ·å
- é‡æ–°ç‚¹å‡»"Connect"æŒ‰é’®
- MetaMask ä¼šè¯·æ±‚æ–°è´¦æˆ·çš„æˆæƒ

---

### 3. **è´¦æˆ·åˆ—è¡¨é™åˆ¶**

**é—®é¢˜**ï¼šMetaMask åªè¿”å›å½“å‰é€‰ä¸­çš„ä¸€ä¸ªè´¦æˆ·ï¼Œæ— æ³•è·å–æ‰€æœ‰å·²è¿æ¥çš„è´¦æˆ·åˆ—è¡¨ã€‚

**å½±å“**ï¼š
- æ— æ³•åœ¨ç•Œé¢ä¸­æ˜¾ç¤ºæ‰€æœ‰å·²æˆæƒçš„è´¦æˆ·
- ç”¨æˆ·å¿…é¡»åœ¨ MetaMask ä¸­åˆ‡æ¢è´¦æˆ·

**å†å²**ï¼šæ—©æœŸ MetaMask ä¼šè¿”å›æ‰€æœ‰è´¦æˆ·ï¼Œä½†å‡ºäºéšç§è€ƒè™‘ï¼Œç°åœ¨åªè¿”å›å½“å‰é€‰ä¸­çš„è´¦æˆ·ã€‚

---

### 4. **é“¾åˆ‡æ¢é™åˆ¶**

**é—®é¢˜**ï¼šåªèƒ½åˆ‡æ¢åˆ° MetaMask å·²çŸ¥çš„é“¾ï¼Œæ— æ³•åˆ‡æ¢åˆ°å®Œå…¨è‡ªå®šä¹‰çš„é“¾ã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼š
- ä½¿ç”¨ `wallet_addEthereumChain` å…ˆæ·»åŠ é“¾
- ç„¶åä½¿ç”¨ `wallet_switchEthereumChain` åˆ‡æ¢

---

## âœ… æ”¯æŒçš„åŠŸèƒ½

1. âœ… è¿æ¥é’±åŒ…ï¼ˆ`eth_requestAccounts`ï¼‰
2. âœ… åœ¨å·²è¿æ¥è´¦æˆ·ä¹‹é—´åˆ‡æ¢ï¼ˆè‡ªåŠ¨æ£€æµ‹ï¼‰
3. âœ… åˆ‡æ¢é“¾ï¼ˆ`wallet_switchEthereumChain`ï¼‰
4. âœ… æ·»åŠ é“¾ï¼ˆ`wallet_addEthereumChain`ï¼‰
5. âœ… ç­¾åæ¶ˆæ¯ï¼ˆ`personal_sign`, `eth_signTypedData_v4`ï¼‰
6. âœ… å‘é€äº¤æ˜“ï¼ˆ`eth_sendTransaction`ï¼‰
7. âœ… è¯»å–åˆçº¦ï¼ˆ`eth_call`ï¼‰
8. âœ… å†™å…¥åˆçº¦ï¼ˆ`eth_sendTransaction`ï¼‰

---

## ğŸ“š å‚è€ƒèµ„æ–™

- [MetaMask æ–‡æ¡£ - Ethereum Provider API](https://docs.metamask.io/wallet/reference/provider-api/)
- [EIP-1193: Ethereum Provider JavaScript API](https://eips.ethereum.org/EIPS/eip-1193)
- [MetaMask éšç§æ”¹è¿›å…¬å‘Š](https://medium.com/metamask/breaking-change-no-longer-exposing-user-accounts-to-dapps-by-default-4860c4c7d15b)


